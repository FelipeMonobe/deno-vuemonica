import{d as p,r as b,c as f,w as r,v as n,u as l,g as t,h as m,t as _,i as u,j as v,o as g}from"./vendor.0376c1be.js";const k=[{octave:4,key:"C",hole:"+1"},{octave:4,key:"Db",hole:"-1'"},{octave:4,key:"D",hole:"-1"},{octave:4,key:"Eb",hole:"+1#"},{octave:4,key:"E",hole:"+2"},{octave:4,key:"F",hole:"-2''"},{octave:4,key:"Gb",hole:"-2'"},{octave:4,key:"G",hole:"-2"},{octave:4,key:"G",hole:"+3"},{octave:4,key:"Ab",hole:"-3'''"},{octave:4,key:"A",hole:"-3''"},{octave:4,key:"Bb",hole:"-3'"},{octave:4,key:"B",hole:"-3"},{octave:5,key:"C",hole:"+4"},{octave:5,key:"Db",hole:"-4'"},{octave:5,key:"D",hole:"-4"},{octave:5,key:"Eb",hole:"+4#"},{octave:5,key:"E",hole:"+5"},{octave:5,key:"F",hole:"-5"},{octave:5,key:"Gb",hole:"+5#"},{octave:5,key:"G",hole:"+6"},{octave:5,key:"Ab",hole:"-6'"},{octave:5,key:"A",hole:"-6"},{octave:5,key:"Bb",hole:"+6#"},{octave:5,key:"B",hole:"-7"},{octave:6,key:"C",hole:"+7"},{octave:6,key:"Db",hole:"-7'"},{octave:6,key:"D",hole:"-8"},{octave:6,key:"Eb",hole:"+8#"},{octave:6,key:"E",hole:"+8"},{octave:6,key:"F",hole:"-9"},{octave:6,key:"Gb",hole:"+9#"},{octave:6,key:"G",hole:"+9"},{octave:6,key:"Ab",hole:"-9'"},{octave:6,key:"A",hole:"-10"},{octave:6,key:"Bb",hole:"+10##"},{octave:6,key:"B",hole:"+10#"},{octave:7,key:"C",hole:"+10"},{octave:7,key:"Db",hole:"-10'"}],w=(c,e=-1)=>{const i=C(c);return R(i,k).map(o=>{if(o==="\\n")return{octave:0,key:"",hole:`
`};const s=k.find(a=>a.octave===o.octave+e&&a.key===o.key);if(!s)throw new Error(`"${o.hole}" not found for "${e}" pitch.`);return s}).map(o=>o.hole).join(" ").replace(/^\s+/gm,"")};function C(c){return c.replace(/(\d'*)\n/g,"$1 \\n ").replace(/(?<![+-])(\d)/g,"+$1")}function R(c,e){const h=/\d/.test(c)?"hole":"key",d=(o,s)=>{const a=o.find(y=>y[h]===s);if(!a)throw new Error(`Invalid input note ${s}.`);return a};return c.split(/\s+/).map(o=>/\\n/.test(o)?"\\n":d(e,o))}const D={class:"d-flex card mt-3 p-3"},E={class:"alert alert-danger alert-dismissible fade show",role:"alert"},N=t("strong",null,"Error!",-1),x=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),B={class:"flex-fill"},T={class:"mt-2"},G={class:"flex-fill mt-3 px-2"},M=t("div",null,[t("p",null,"Pitch adjustment:")],-1),P={class:"form-check"},V=t("label",{class:"form-check-label",for:"decreasePitch"},"Decrease",-1),$={class:"form-check"},A=t("label",{class:"form-check-label",for:"increasePitch"},"Increase",-1),U={class:"mb-2 d-grid gap-1 mt-3"},I=p({setup(c){const e=b({tablature:"",result:"",pitch:-1,showResults:!1,errorMsg:""}),i=async()=>{if(!e.tablature)return Promise.resolve();try{const o=await w(e.tablature,e.pitch);e.result=o,e.showResults=!0}catch(o){e.errorMsg=o.message}},h=()=>{e.tablature="",e.result="",e.pitch=-1,e.showResults=!1},d=o=>{o.target.select()};return(o,s)=>(g(),f("div",D,[r(t("div",E,[N,m(" "+_(l(e).errorMsg)+" ",1),x],512),[[n,l(e).errorMsg]]),t("div",B,[t("div",T,[r(t("textarea",{"onUpdate:modelValue":s[0]||(s[0]=a=>l(e).tablature=a),class:"form-control",rows:"10",cols:"30"},null,512),[[u,l(e).tablature],[n,!l(e).showResults]])]),t("div",null,[r(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=a=>l(e).result=a),onClick:d,class:"form-control",rows:"10",cols:"30",readonly:""},null,512),[[u,l(e).result],[n,l(e).showResults]])])]),t("div",G,[M,t("div",P,[r(t("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>l(e).pitch=a),value:-1,class:"form-check-input",type:"radio",id:"decreasePitch",checked:""},null,512),[[v,l(e).pitch]]),V]),t("div",$,[r(t("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>l(e).pitch=a),value:1,class:"form-check-input",type:"radio",id:"increasePitch"},null,512),[[v,l(e).pitch]]),A]),t("div",U,[r(t("button",{class:"btn btn-primary btn-lg",onClick:i}," Transpose ",512),[[n,!l(e).showResults]]),r(t("button",{class:"btn btn-primary btn-lg",onClick:s[4]||(s[4]=a=>l(e).showResults=!1)}," Edit ",512),[[n,l(e).showResults]]),t("button",{class:"btn btn-secondary btn-lg",onClick:h}," Reset ")])])]))}});export{I as default};
