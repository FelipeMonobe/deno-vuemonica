import{d as _,r as g,g as w,c as k,u as o,h as C,t as R,i as t,j as y,w as i,v as b,k as v,l as f,o as p}from"./vendor.4c2fccef.js";const m=[{octave:4,key:"C",hole:"+1"},{octave:4,key:"Db",hole:"-1'"},{octave:4,key:"D",hole:"-1"},{octave:4,key:"Eb",hole:"+1#"},{octave:4,key:"E",hole:"+2"},{octave:4,key:"F",hole:"-2''"},{octave:4,key:"Gb",hole:"-2'"},{octave:4,key:"G",hole:"-2"},{octave:4,key:"G",hole:"+3"},{octave:4,key:"Ab",hole:"-3'''"},{octave:4,key:"A",hole:"-3''"},{octave:4,key:"Bb",hole:"-3'"},{octave:4,key:"B",hole:"-3"},{octave:5,key:"C",hole:"+4"},{octave:5,key:"Db",hole:"-4'"},{octave:5,key:"D",hole:"-4"},{octave:5,key:"Eb",hole:"+4#"},{octave:5,key:"E",hole:"+5"},{octave:5,key:"F",hole:"-5"},{octave:5,key:"Gb",hole:"+5#"},{octave:5,key:"G",hole:"+6"},{octave:5,key:"Ab",hole:"-6'"},{octave:5,key:"A",hole:"-6"},{octave:5,key:"Bb",hole:"+6#"},{octave:5,key:"B",hole:"-7"},{octave:6,key:"C",hole:"+7"},{octave:6,key:"Db",hole:"-7'"},{octave:6,key:"D",hole:"-8"},{octave:6,key:"Eb",hole:"+8#"},{octave:6,key:"E",hole:"+8"},{octave:6,key:"F",hole:"-9"},{octave:6,key:"Gb",hole:"+9#"},{octave:6,key:"G",hole:"+9"},{octave:6,key:"Ab",hole:"-9'"},{octave:6,key:"A",hole:"-10"},{octave:6,key:"Bb",hole:"+10##"},{octave:6,key:"B",hole:"+10#"},{octave:7,key:"C",hole:"+10"},{octave:7,key:"Db",hole:"-10'"}],x=(r,e=-1)=>{const d=E(r);return D(d,m).map(l=>{if(l==="\\n")return{octave:0,key:"",hole:`
`};const n=m.find(a=>a.octave===l.octave+e&&a.key===l.key);if(!n)throw new Error(`"${l.hole}" not found for "${e}" pitch.`);return n}).map(l=>l.hole).join(" ").replace(/^\s+/gm,"")};function E(r){return r.replace(/(\d'*)\n/g,"$1 \\n ").replace(/(?<![+-])(\d)/g,"+$1")}function D(r,e){const h=/\d/.test(r)?"hole":"key",u=(l,n)=>{const a=l.find(s=>s[h]===n);if(!a)throw new Error(`Invalid input note ${n}.`);return a};return r.split(/\s+/).map(l=>/\\n/.test(l)?"\\n":u(e,l))}const N={class:"d-flex card mt-3 p-3"},T={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},B=t("strong",null,"Error!",-1),M={class:"flex-fill"},G={class:"mt-2"},V=["rows"],P=["rows"],$={key:0,class:"mt-2 text-success fw-bold fs-6"},A=t("small",null,"\u2714\uFE0F Copied!",-1),F=[A],U={class:"flex-fill mt-3 px-2"},I=t("div",null,[t("p",null,"Pitch adjustment:")],-1),S={class:"form-check"},j=t("label",{class:"form-check-label",for:"decreasePitch"},"Decrease",-1),z={class:"form-check"},H=t("label",{class:"form-check-label",for:"increasePitch"},"Increase",-1),K={class:"mb-2 d-grid gap-1 mt-3"},q=_({setup(r){const e=g({tablature:"",result:"",pitch:-1,showResults:!1,resultsCopied:!1,errorMsg:""}),d=w(()=>e.errorMsg?5:11),h=async()=>{if(!e.tablature)return Promise.resolve();try{const a=await x(e.tablature,e.pitch);e.result=a,e.showResults=!0,e.resultsCopied=!1}catch(a){e.errorMsg=a.message}},u=()=>{e.tablature="",e.result="",e.pitch=-1,e.showResults=!1},l=a=>{const s=a.target;s.select(),s.setSelectionRange(0,99999),navigator.clipboard.writeText(s.value),e.resultsCopied=!0},n=()=>{e.errorMsg=""};return(a,s)=>(p(),k("div",N,[o(e).errorMsg?(p(),k("div",T,[B,C(" "+R(o(e).errorMsg)+" ",1),t("button",{type:"button",class:"btn-close",onClick:n})])):y("",!0),t("div",M,[t("div",G,[i(t("textarea",{"onUpdate:modelValue":s[0]||(s[0]=c=>o(e).tablature=c),class:"form-control",rows:o(d)},null,8,V),[[b,o(e).tablature],[v,!o(e).showResults]])]),t("div",null,[i(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=c=>o(e).result=c),onClick:l,class:"form-control",rows:o(d),readonly:""},null,8,P),[[b,o(e).result],[v,o(e).showResults]]),o(e).resultsCopied?(p(),k("p",$,F)):y("",!0)])]),t("div",U,[I,t("div",S,[i(t("input",{"onUpdate:modelValue":s[2]||(s[2]=c=>o(e).pitch=c),value:-1,class:"form-check-input",type:"radio",id:"decreasePitch",checked:""},null,512),[[f,o(e).pitch]]),j]),t("div",z,[i(t("input",{"onUpdate:modelValue":s[3]||(s[3]=c=>o(e).pitch=c),value:1,class:"form-check-input",type:"radio",id:"increasePitch"},null,512),[[f,o(e).pitch]]),H]),t("div",K,[i(t("button",{class:"btn btn-primary btn-lg",onClick:h}," Transpose ",512),[[v,!o(e).showResults]]),i(t("button",{class:"btn btn-primary btn-lg",onClick:s[4]||(s[4]=c=>o(e).showResults=!1)}," Edit ",512),[[v,o(e).showResults]]),t("button",{class:"btn btn-secondary btn-lg",onClick:u}," Reset ")])])]))}});export{q as default};
